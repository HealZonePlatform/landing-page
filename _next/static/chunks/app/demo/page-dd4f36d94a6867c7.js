(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{2394:function(e,t,r){Promise.resolve().then(r.bind(r,866))},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},866:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(7437),s=r(2265),a=r(9376),l=r(7648);let o=e=>{let{title:t,children:r}=e;return(0,n.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-primary-500 uppercase tracking-wider",children:t}),(0,n.jsx)("div",{className:"mt-2 text-neutral-200",children:r})]})},i=e=>{let{step:t,index:r}=e;return(0,n.jsxs)("div",{className:"relative pl-8",children:[(0,n.jsx)("div",{className:"absolute left-0 top-0 flex items-center justify-center h-6 w-6 rounded-full bg-primary-600 text-white font-bold text-sm",children:r+1}),(0,n.jsxs)("h4",{className:"font-bold text-white",children:[t.step,":"," ",(0,n.jsx)("span",{className:"font-medium text-neutral-300",children:t.productType})]}),(0,n.jsx)("p",{className:"mt-1 text-sm text-neutral-400",children:t.reason})]})},c=e=>{let{result:t}=e,r=e=>{if(navigator&&navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>alert("Đ\xe3 sao ch\xe9p li\xean kết v\xe0o clipboard!")).catch(e=>console.error("Error copying:",e));else try{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();let r=document.execCommand("copy");document.body.removeChild(t),r?alert("Đ\xe3 sao ch\xe9p li\xean kết v\xe0o clipboard!"):alert("Kh\xf4ng thể sao ch\xe9p li\xean kết. Vui l\xf2ng sao ch\xe9p thủ c\xf4ng.")}catch(e){console.error("Fallback copy failed:",e),alert("Kh\xf4ng thể sao ch\xe9p li\xean kết. Vui l\xf2ng sao ch\xe9p thủ c\xf4ng.")}};return(0,n.jsx)("section",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 -mt-16 mb-24 animate-fade-in",children:(0,n.jsxs)("div",{className:"bg-slate-800 rounded-2xl shadow-2xl p-4 sm:p-6 lg:p-8 border border-slate-700",children:[(0,n.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-2",children:[(0,n.jsx)("h2",{className:"text-3xl font-bold text-center text-white flex-1 min-w-fit",children:"Kết quả Ph\xe2n t\xedch & Gợi \xfd cho bạn"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 justify-end",children:[(0,n.jsxs)("button",{onClick:()=>{localStorage.setItem("skincareResult",JSON.stringify(t)),alert("Kết quả đ\xe3 được lưu cục bộ!")},className:"px-3 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors flex items-center text-sm",title:"Lưu kết quả",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),"Lưu"]}),(0,n.jsxs)("button",{onClick:()=>{let e={title:"Ph\xe2n t\xedch da th\xf4ng minh",text:"Kết quả ph\xe2n t\xedch da của t\xf4i",url:window.location.href};navigator&&navigator.share&&"function"==typeof navigator.share&&("https:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname)?navigator.share(e).catch(e=>console.error("Error sharing:",e)):r(window.location.href)},className:"px-3 py-2 rounded-lg bg-green-600 text-white font-medium hover:bg-green-700 transition-colors flex items-center text-sm",title:"Chia sẻ kết quả",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Chia sẻ"]}),(0,n.jsxs)("button",{onClick:()=>{window.print()},className:"px-3 py-2 rounded-lg bg-purple-600 text-white font-medium hover:bg-purple-700 transition-colors flex items-center text-sm",title:"Lưu dưới dạng PDF",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"PDF"]}),(0,n.jsxs)("button",{onClick:()=>{alert("Chức năng gợi \xfd sản phẩm đang được ph\xe1t triển. Sẽ sớm ra mắt!")},className:"px-3 py-2 rounded-lg bg-yellow-600 text-white font-medium hover:bg-yellow-700 transition-colors flex items-center text-sm",title:"Gợi \xfd sản phẩm",children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"SP"]})]})]}),t.imageUrl&&(0,n.jsx)("div",{className:"flex justify-center mb-8",children:(0,n.jsx)("div",{className:"relative max-w-xs mx-auto",children:(0,n.jsx)("img",{src:t.imageUrl,alt:"Ảnh ph\xe2n t\xedch da",className:"w-full h-auto rounded-xl shadow-lg border-2 border-primary-500/30 object-cover max-h-80",onError:e=>{console.error("Kh\xf4ng thể tải ảnh:",t.imageUrl),e.currentTarget.style.display="none"}})})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,n.jsx)(o,{title:"Loại Da Của Bạn",children:(0,n.jsx)("p",{className:"text-lg sm:text-xl font-semibold",children:t.skinType})}),(0,n.jsx)(o,{title:"C\xe1c Vấn Đề Cần Ch\xfa \xdd",children:t.concerns.length>0?(0,n.jsx)("ul",{className:"list-disc list-inside space-y-1",children:t.concerns.map((e,t)=>(0,n.jsx)("li",{children:e},t))}):(0,n.jsx)("p",{children:"Kh\xf4ng ph\xe1t hiện vấn đề đ\xe1ng kể."})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 sm:h-6 w-5 sm:w-6 mr-2 sm:mr-3 text-primary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),"Buổi S\xe1ng (AM)"]}),(0,n.jsx)("div",{className:"space-y-4 sm:space-y-6 border-l-2 border-primary-800/50 ml-3",children:t.amRoutine.map((e,t)=>(0,n.jsx)(i,{step:e,index:t},"am-".concat(t)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 sm:h-6 w-5 sm:w-6 mr-2 sm:mr-3 text-primary-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.03 9.003 0 0012 21a9.03 9.003 0 008.354-5.646z"})}),"Buổi Tối (PM)"]}),(0,n.jsx)("div",{className:"space-y-4 sm:space-y-6 border-l-2 border-primary-800/50 ml-3",children:t.pmRoutine.map((e,t)=>(0,n.jsx)(i,{step:e,index:t},"pm-".concat(t)))})]})]}),(0,n.jsxs)("div",{className:"mt-8 sm:mt-10 bg-primary-900/40 border border-primary-700 text-primary-300 px-3 sm:px-4 py-3 rounded-lg text-xs sm:text-sm",children:[(0,n.jsx)("p",{className:"font-bold",children:"Lưu \xfd quan trọng:"}),(0,n.jsx)("p",{children:t.disclaimer})]})]})})},d=e=>new Promise((t,r)=>{if(!e.type||!e.type.match("image.*")){r(Error("File kh\xf4ng phải l\xe0 h\xecnh ảnh"));return}let n=document.createElement("canvas"),s=n.getContext("2d");if(!s){r(Error("Kh\xf4ng thể tạo canvas context"));return}let a=new Image;a.onload=()=>{try{let{width:l,height:o}=a;l>o?l>1024&&(o=1024*o/l,l=1024):o>1024&&(l=1024*l/o,o=1024),n.width=l,n.height=o,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(a,0,0,l,o);let i="image/jpeg"===e.type||"image/jpg"===e.type,c=i?"image/jpeg":"image/webp",d=n.toDataURL(c,i?.8:.7);if(!d.includes(",")){r(Error("Kh\xf4ng thể chuyển đổi ảnh sang định dạng base64"));return}let h=d.split(",")[1]||"",m=Math.round(3*h.length/4);t({base64:h,mimeType:c,fileSize:m})}catch(e){r(e)}finally{URL.revokeObjectURL(a.src)}},a.onerror=()=>{URL.revokeObjectURL(a.src),r(Error("Kh\xf4ng thể tải ảnh"))},a.src=URL.createObjectURL(e)});function h(){(0,a.useRouter)();let[e,t]=(0,s.useState)(null),[r,o]=(0,s.useState)(null),[i,h]=(0,s.useState)(!1),[m,x]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),[g,v]=(0,s.useState)(0),[w,f]=(0,s.useState)(0),[j,b]=(0,s.useState)(!1),y=async t=>{if(t.preventDefault(),p(null),x(null),v(0),f(0),!e){p("H\xe3y chọn một ảnh khu\xf4n mặt trước.");return}h(!0);let n=null,s=null,a=null;try{v(0),f(0),n=setInterval(()=>{v(e=>e<30?e+1:(n&&clearInterval(n),30))},50);let t=await d(e);n&&(clearInterval(n),n=null),v(30),s=setInterval(()=>{v(e=>e<60?e+1:(s&&clearInterval(s),60))},30);let l=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:t.base64,mimeType:t.mimeType})});s&&(clearInterval(s),s=null),v(100),a=setInterval(()=>{f(e=>e<100?e+2:(a&&clearInterval(a),100))},50);let o=await l.json();if(a&&(clearInterval(a),a=null),f(100),!l.ok)throw Error((null==o?void 0:o.error)||"Ph\xe2n t\xedch thất bại");if(!o)throw Error("Dữ liệu phản hồi kh\xf4ng hợp lệ");if(e&&r){let e={...o,imageUrl:r};x(e)}else x(o)}catch(e){var l;n&&clearInterval(n),s&&clearInterval(s),a&&clearInterval(a),p(null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"Đ\xe3 xảy ra lỗi.")}finally{h(!1),setTimeout(()=>{v(0),f(0)},1e3)}},k=e=>{if(!e.type||!e.type.match("image.*")){p("Vui l\xf2ng chọn một tệp h\xecnh ảnh");return}if(e.size>10485760){p("K\xedch thước ảnh qu\xe1 lớn. Vui l\xf2ng chọn ảnh dưới 10MB.");return}if(!e.name){p("Tệp kh\xf4ng hợp lệ");return}r&&URL.revokeObjectURL(r),o(URL.createObjectURL(e)),t(e),p(null)},N=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?b(!0):"dragleave"===e.type&&b(!1)},[]),L=(0,s.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),b(!1),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files[0])try{let t=e.dataTransfer.files[0];k(t)}catch(e){p("Đ\xe3 xảy ra lỗi khi xử l\xfd tệp được k\xe9o thả"),console.error("Error handling dropped file:",e)}},[]);(0,s.useEffect)(()=>{let e=document.getElementById("drop-zone");return e&&(e.addEventListener("dragenter",N),e.addEventListener("dragleave",N),e.addEventListener("dragover",N),e.addEventListener("drop",L)),()=>{e&&(e.removeEventListener("dragenter",N),e.removeEventListener("dragleave",N),e.removeEventListener("dragover",N),e.removeEventListener("drop",L))}},[N,L]);let C=()=>{r&&(URL.revokeObjectURL(r),o(null)),t(null),x(null),p(null),v(0),f(0)},M=e=>{if(navigator&&navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>alert("Đ\xe3 sao ch\xe9p li\xean kết v\xe0o clipboard!")).catch(e=>console.error("Error copying:",e));else try{let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();let r=document.execCommand("copy");document.body.removeChild(t),r?alert("Đ\xe3 sao ch\xe9p li\xean kết v\xe0o clipboard!"):alert("Kh\xf4ng thể sao ch\xe9p li\xean kết. Vui l\xf2ng sao ch\xe9p thủ c\xf4ng.")}catch(e){console.error("Fallback copy failed:",e),alert("Kh\xf4ng thể sao ch\xe9p li\xean kết. Vui l\xf2ng sao ch\xe9p thủ c\xf4ng.")}};return(0,s.useEffect)(()=>()=>{if(r)try{URL.revokeObjectURL(r)}catch(e){console.error("Error revoking object URL:",e)}},[r]),(0,n.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsxs)(l.default,{href:"/",className:"border border-primary-600 text-primary-600 hover:bg-primary-50 font-medium py-2 px-4 rounded-lg transition duration-300 ease-in-out flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Trở về trang chủ"]}),(0,n.jsx)("h1",{className:"text-4xl font-bold text-gray-900 text-center flex-1",children:"Ph\xe2n t\xedch da th\xf4ng minh bằng AI"})]}),(0,n.jsx)("div",{className:"text-center mb-4",children:(0,n.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Tải l\xean ảnh khu\xf4n mặt để nhận ph\xe2n t\xedch chuy\xean s\xe2u v\xe0 lộ tr\xecnh chăm s\xf3c da c\xe1 nh\xe2n h\xf3a"})}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,n.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("label",{className:"block text-lg font-medium text-gray-800 mb-4",children:"Chọn ảnh khu\xf4n mặt của bạn"}),(0,n.jsx)("div",{className:"max-w-md mx-auto",children:(0,n.jsxs)("div",{id:"drop-zone",className:"border-2 border-dashed rounded-xl p-8 cursor-pointer relative overflow-hidden transition-all duration-300 ".concat(j?"border-primary-500 bg-primary-100 scale-105":"border-primary-300 bg-primary-50 hover:border-primary-400 hover:bg-primary-100"),children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&k(e.target.files[0])},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center pointer-events-none",children:[(0,n.jsx)("svg",{className:"w-12 h-12 text-primary-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,n.jsx)("p",{className:"text-primary-700 font-medium",children:"K\xe9o v\xe0 thả ảnh v\xe0o đ\xe2y"}),(0,n.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"hoặc nhấn để chọn"}),(0,n.jsx)("p",{className:"text-gray-400 text-xs mt-2",children:"Hỗ trợ: JPG, PNG dưới 10MB"})]})]})})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("button",{type:"submit",disabled:i||!e,className:"w-full md:w-auto px-8 py-3 rounded-xl text-white font-semibold transform transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-primary-300 focus:ring-opacity-50 ".concat(i||!e?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 hover:shadow-lg hover:shadow-primary-200 active:scale-95"),children:i?(0,n.jsxs)("span",{className:"flex items-center justify-center",children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang ph\xe2n t\xedch..."]}):(0,n.jsxs)("span",{className:"flex items-center justify-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Ph\xe2n t\xedch da ngay"]})})})]}),e&&!i&&!m&&(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)("div",{className:"text-center mb-4",children:(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Ảnh đ\xe3 chọn"})}),(0,n.jsxs)("div",{className:"relative mx-auto block border-4 border-white rounded-xl shadow-lg overflow-hidden max-w-xs md:max-w-md bg-gray-100",children:[(0,n.jsx)("img",{src:r||"",alt:"Preview",className:"max-w-full h-auto rounded-lg object-contain max-h-80",style:{minHeight:"200px"},onError:e=>{console.error("Error loading image preview"),p("Kh\xf4ng thể hiển thị ảnh preview")}}),(0,n.jsx)("div",{className:"absolute -top-3 -right-3",children:(0,n.jsx)("button",{onClick:C,className:"bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transform transition-transform duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-red-300","aria-label":"X\xf3a ảnh",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),(0,n.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 text-white text-center",children:[(0,n.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,n.jsxs)("p",{className:"text-xs opacity-80",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]})]}),i&&(0,n.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Đang xử l\xfd ảnh của bạn"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:g<50?"Đang xử l\xfd ảnh...":g<100?"Đang tải ảnh l\xean...":"Đang ph\xe2n t\xedch ảnh..."})]}),(0,n.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,n.jsxs)("div",{className:"relative mx-auto block border-4 border-white rounded-xl shadow-lg overflow-hidden max-w-xs md:max-w-md bg-gray-100 mb-6",children:[(0,n.jsx)("img",{src:r||"",alt:"Preview",className:"max-w-full h-auto rounded-lg object-contain max-h-80 opacity-60",style:{minHeight:"200px"}}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500 mb-3"}),(0,n.jsxs)("p",{className:"text-primary-600 font-medium text-center",children:["AI đang ph\xe2n t\xedch",(0,n.jsx)("br",{}),"l\xe0n da của bạn..."]})]})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,n.jsx)("span",{children:"Trạng th\xe1i:"}),(0,n.jsx)("span",{children:g<100?"".concat(g,"%"):"".concat(w,"%")})]}),(0,n.jsxs)("div",{className:"relative h-4 bg-gray-200 rounded-full overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary-400 to-primary-600 transition-all duration-500 ease-out",style:{width:"".concat(g<100?g:w,"%")}}),(0,n.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent,rgba(255,255,255,0.5),transparent)] animate-[progress-shine_2s_infinite]"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mt-4",children:[(0,n.jsxs)("div",{className:"flex items-center ".concat(g>=30?"text-green-600":"text-gray-400"),children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1 ".concat(g>=30?"text-green-500":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Xử l\xfd ảnh"]}),(0,n.jsxs)("div",{className:"flex items-center ".concat(g>=60?"text-green-600":g>=30?"text-yellow-500":"text-gray-400"),children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1 ".concat(g>=60?"text-green-500":g>=30?"text-yellow-500":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Tải l\xean"]}),(0,n.jsxs)("div",{className:"flex items-center ".concat(w>=50?"text-green-600":g>=100?"text-yellow-500":"text-gray-400"),children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1 ".concat(w>=50?"text-green-500":g>=100?"text-yellow-500":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Ph\xe2n t\xedch"]}),(0,n.jsxs)("div",{className:"flex items-center ".concat(w>=100?"text-green-600":w>0?"text-yellow-500":"text-gray-400"),children:[(0,n.jsx)("svg",{className:"w-4 h-4 mr-1 ".concat(w>=100?"text-green-500":w>0?"text-yellow-500":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Ho\xe0n tất"]})]})]})]})]}),u&&(0,n.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start shadow-sm",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,n.jsxs)("div",{className:"ml-3 flex-1",children:[(0,n.jsx)("p",{className:"text-red-700 font-medium",children:"Lỗi:"}),(0,n.jsx)("p",{className:"text-red-600 mt-1",children:u})]}),(0,n.jsx)("button",{onClick:()=>p(null),className:"ml-4 flex-shrink-0 text-red-500 hover:text-red-700 rounded-full p-1 transition-colors duration-200","aria-label":"Đ\xf3ng th\xf4ng b\xe1o",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),m&&(0,n.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-2xl p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Kết quả ph\xe2n t\xedch da"}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsxs)("button",{onClick:()=>{localStorage.setItem("skincareResult",JSON.stringify(m)),alert("Kết quả đ\xe3 được lưu cục bộ!")},className:"px-4 py-2 rounded-lg bg-blue-100 text-blue-700 font-medium hover:bg-blue-200 transition-colors flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),"Lưu kết quả"]}),(0,n.jsxs)("button",{onClick:()=>{let e={title:"Ph\xe2n t\xedch da th\xf4ng minh",text:"Kết quả ph\xe2n t\xedch da của t\xf4i",url:window.location.href};navigator&&navigator.share&&"function"==typeof navigator.share&&("https:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname)?navigator.share(e).catch(e=>console.error("Error sharing:",e)):M(window.location.href)},className:"px-4 py-2 rounded-lg bg-green-100 text-green-700 font-medium hover:bg-green-200 transition-colors flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Chia sẻ"]}),(0,n.jsxs)("button",{onClick:()=>window.print(),className:"px-4 py-2 rounded-lg bg-purple-100 text-purple-700 font-medium hover:bg-purple-200 transition-colors flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In kết quả"]}),(0,n.jsxs)("button",{onClick:()=>{alert("Chức năng gợi \xfd sản phẩm đang được ph\xe1t triển. Sẽ sớm ra mắt!")},className:"px-4 py-2 rounded-lg bg-yellow-100 text-yellow-700 font-medium hover:bg-yellow-200 transition-colors flex items-center",children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Gợi \xfd sản phẩm"]}),(0,n.jsx)("button",{onClick:C,className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-medium hover:bg-gray-300 transition-colors",children:"Ph\xe2n t\xedch lại"})]})]}),(0,n.jsx)(c,{result:m})]})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=2394)}),_N_E=e.O()}]);